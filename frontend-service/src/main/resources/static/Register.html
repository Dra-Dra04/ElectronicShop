<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Register - Electro</title>
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,700" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="css/bootstrap.min.css"/>
    <link type="text/css" rel="stylesheet" href="css/style.css"/>
</head>
<body>

<!-- TODO: có thể copy header Electro từ store.html sang -->

<div class="section">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-md-offset-3">
                <h2>Đăng ký tài khoản</h2>
                <form id="registerForm">
                    <div class="form-group">
                        <label>Họ tên</label>
                        <input id="fullName" class="input" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input id="email" type="email" class="input" required>
                    </div>
                    <div class="form-group">
                        <label>Mật khẩu</label>
                        <input id="password" type="password" class="input" required>
                    </div>
                    <div class="form-group">
                        <label>Số điện thoại</label>
                        <input id="phone" class="input">
                    </div>
                    <div class="form-group">
                        <label>Địa chỉ</label>
                        <input id="address" class="input">
                    </div>
                    <button type="submit" class="primary-btn">Đăng ký</button>
                    <p class="text-info" id="msg"></p>
                </form>
                <p>Đã có tài khoản? <a href="login.html">Đăng nhập</a></p>
            </div>
        </div>
    </div>
</div>

<!-- FOOTER ... có thể copy từ store.html -->

<script>
    const CUSTOMER_API = "http://localhost:8082";

    document.getElementById("registerForm").addEventListener("submit", async function (e) {
        e.preventDefault();

        const body = {
            fullName: document.getElementById("fullName").value,
            email: document.getElementById("email").value,
            password: document.getElementById("password").value,
            phone: document.getElementById("phone").value,
            address: document.getElementById("address").value
        };

        try {
            const res = await fetch(CUSTOMER_API + "/api/users/customer", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
            });

            if (res.ok) {
                document.getElementById("msg").innerText = "Đăng ký thành công! Chuyển sang trang đăng nhập...";
                setTimeout(() => {
                    window.location.href = "login.html";
                }, 1500);
            } else {
                const text = await res.text();
                document.getElementById("msg").innerText = "Đăng ký thất bại: " + text;
            }
        } catch (err) {
            console.error(err);
            document.getElementById("msg").innerText = "Lỗi kết nối server";
        }
    });
</script>

</body>
</html>
